//.980 sting grenade
/obj/item/ammo_casing/c980grenade/sting
	name = ".980 Tydhouer sting grenade"
	desc = "A large grenade shell that will detonate at a range given to it by the gun that fires it. Explodes into rubberballs on detonation."

	icon_state = "980_explosive"

	projectile_type = /obj/projectile/bullet/c980grenade/sting

	custom_materials = AMMO_MATS_GRENADE_SHRAPNEL
	advanced_print_req = TRUE

	harmful = FALSE


/obj/projectile/bullet/c980grenade/sting
	name = ".980 Tydhouer shrapnel grenade"

	/// What type of casing should we put inside the bullet to act as shrapnel later
	var/casing_to_spawn = /obj/item/grenade/c980payload/sting


/obj/projectile/bullet/c980grenade/shrapnel/fuse_activation(atom/target)
	var/obj/item/grenade/shrapnel_maker = new casing_to_spawn(get_turf(target))
	shrapnel_maker.detonate()
	playsound(src, 'modular_nova/modules/modular_weapons/sounds/grenade_burst.ogg', 50, TRUE, -3)
	qdel(shrapnel_maker)


/obj/item/ammo_box/c980grenade/sting
	name = "ammo box (.980 Tydhouer shrapnel)"
	desc = "A box of four .980 Tydhouer sting grenades. Instructions on the box indicate these are rubber rounds. It's also covered in hazard signs, odd."

	icon_state = "980box_explosive"

	ammo_type = /obj/item/ammo_casing/c980grenade/sting


/obj/item/grenade/c980payload/sting
	shrapnel_type = /obj/projectile/bullet/stingball/short_range
	shrapnel_radius = 5
	ex_dev = 0
	ex_heavy = 0
	ex_light = 0
	ex_flame = 0


/obj/projectile/bullet/stingball/short_range
	range = 4


//.980 extinguisher grenade.
/obj/item/ammo_casing/c980grenade/extinguisher
	name = ".980 Tydhouer extinguisher foam grenade"
	desc = "A large grenade shell that will detonate at a range given to it by the gun that fires it. Bursts into extinguishing foam."

	icon_state = "980_gas"

	projectile_type = /obj/projectile/bullet/c980grenade/extinguisher


/obj/projectile/bullet/c980grenade/extinguisher
	name = ".980 Tydhouer extinguisher foam grenade"

/obj/projectile/bullet/c980grenade/extinguisher/fuse_activation(atom/target)
	playsound(src, 'modular_nova/modules/modular_weapons/sounds/grenade_burst.ogg', 50, TRUE, -3)
	playsound(src, 'sound/effects/smoke.ogg', 50, TRUE, -3)
	var/datum/effect_system/fluid_spread/smoke/chem/smoke = new()
	smoke.chemholder.add_reagent(/datum/reagent/firefighting_foam, 10)
	smoke.set_up(GRENADE_SMOKE_RANGE, holder = src, location = src)
	smoke.start()

//.980 atmoresin grenade
/obj/item/ammo_casing/c980grenade/resin
	name = ".980 Tydhouer resin grenade"
	desc = "A large grenade shell that will detonate at a range given to it by the gun that fires it. Bursts into a resin walls."

	icon_state = "980_gas"

	projectile_type = /obj/projectile/bullet/c980grenade/resin


/obj/projectile/bullet/c980grenade/resin
	name = ".980 Tydhouer resin grenade"

/obj/projectile/bullet/c980grenade/resin/fuse_activation(atom/target)
	playsound(src, 'modular_nova/modules/modular_weapons/sounds/grenade_burst.ogg', 50, TRUE, -3)
	playsound(src, 'sound/effects/smoke.ogg', 50, TRUE, -3)
	var/datum/effect_system/fluid_spread/smoke/chem/smoke = new()
	smoke.chemholder.add_reagent(/datum/fluid/foam/metal/resin, 10)
	smoke.set_up(GRENADE_SMOKE_RANGE, holder = src, location = src)
	smoke.start()

// .980 sonic powder grenade
/obj/item/ammo_casing/c980grenade/flashbang
	name = ".980 Tydhouer flashbang grenade"
	desc = "A large grenade shell that will detonate at a range given to it by the gun that fires it. Bursts into a blinding bright flash."

	icon_state = "980_gas"

	projectile_type = /obj/projectile/bullet/c980grenade/flashbang


/obj/projectile/bullet/c980grenade/flashbang
	name = ".980 Tydhouer flashbang grenade"

/obj/projectile/bullet/c980grenade/flashbang/fuse_activation(atom/target)
	playsound(src, 'modular_nova/modules/modular_weapons/sounds/grenade_burst.ogg', 50, TRUE, -3)
	var/datum/effect_system/fluid_spread/smoke/chem/smoke_machine/puff = new()
	smoke.chemholder.add_reagent(/datum/reagent/flash_powder, 10)
	smoke.set_up(GRENADE_SMOKE_RANGE, holder = src, location = src)
	smoke.start()
